## 프로세스와 스레드

- 전통적인 관점에서 하나의 프로세스는 한 번에 한가지 일만 수행했다. 이런 프로세스를 단일 스레드 프로세스라고 한다.
- 하지만 **스레드**라는 개념이 도입되면서 하나의 프로세스가 한 번에 여러 일을 동시에 처리할 수 있게 되었음.
- 스레드는 프로세스 내에서 각기 다르게 구성된다.
    - 스레드 ID
    - 프로그램 카운터 값을 비롯한 레지스터 값
    - 스택
- 여기서 중요한 점은 **프로세스의 스레드들은 실행에 필요한 최소한의 정보만을 유지**한 채 **프로세스의 자원을 공유**하며 실행된다는 점이다.
- 정리하면, 프로세스가 실행되는 프로그램이라면 스레드는 프로세스를 구성하는 실행의 흐름 단위이다.
- 실제로 많은 운영체제는 CPU에 처리할 작업을 전달할 때 프로세스 단위가 아니라 스레드 단위로 전달한다.

## 멀티프로세스와 멀티스레드

- 여러 프로세스를 동시에 실행하는 것을 **멀티프로세스**라고 하고, 여러 스레드로 프로세스를 동시에 실행하는 것을 **멀티스레드**라고 한다.

<aside>
💡
동일한 작업을 수행하는 단일 스레드 프로세스 여러 개와 하나의 프로세스를 여러 스레드로 실행하는 것의 차이가 무엇인가?
</aside>

![Image](https://github.com/user-attachments/assets/752dcdfb-ec39-4354-b0de-f0fd9c4ecde1)
- 프로세스 끼리는 기본적으로 자원을 공유하지 않지만, 스레드끼리는 같은 프로세스 내에서는 자원을 공유한다.

![Image](https://github.com/user-attachments/assets/bccc0c2f-b596-42c8-98b0-e60382103e5a)
- 프로세스는 fork() 하여 같은 작업을 하는 동일한 프로세스를 여러 개 만들면 그만큼 메모리에 통째로 적재되어 메모리 낭비가 발생한다.
- 하지만 하나의 프로세스의 문제가 생긴다 해도 다른 프로세스에 문제가 생기지는 않는다. 별도로 실행되기 때문이다.

![Image](https://github.com/user-attachments/assets/dffd1d0e-c667-4fcf-af09-c77b82a249b6)
- 이에 비해 같은 프로세스 내에 존재하는 스레드들은 프로세스 내 자원을 공유하기 때문에 여러 프로세스를 병행 실행하는 것보다 메모리를 더 효율적으로 사용할 수 있다.
    - 또한 스레드는 프로세스의 자원을 공유하여 서로 협력과 통신에 유리하다.
- 하지만 멀티스레드의 경우 하나의 스레드에 문제가 생기면 프로세스 전체가 문제가 생길 수 있다. 하나의 스레드가 문제가 생기면 다른 스레드도 영향을 받기 때문이다.

## 프로세스 간 통신 (Inter-Process Communication)

- 프로세스끼리는 기본적으로 자원을 공유하지 않지만, **프로세스 간 통신** (IPC) 을 통해 프로세스 간에 자원을 공유하고 데이터를 주고 받을 수 있다.
- 또 프로세스는 서로 공유하는 메모리 영역을 두어 데이터를 주고받을 수 있다. 이런 영역을 공유 메모리라고 한다.
    - **공유 메모리**는 운영체제의 커널에서 관리한다.
- 이외에도 소켓, 파이프를 통해 통신이 가능하다.
- 하지만 이 과정 또한 `System call` 에 해당하기 때문에 오래걸리기는 한다.