- 사용자가 논리적으로는 하나의 중앙 집중식 데이터베이스 시스템처럼 사용할 수 있지만 물리적으로는 분산한 것을 분산 데이터베이스 시스템이라고 한다.

## 분산 데이터베이스 시스템의 구성

- **분산 처리기**
    - 물리적으로 분산되어 지역별로 필요한 데이터를 처리할 수 있는 지역 컴퓨터가 필요하다. 이를 분산 처리기라고 한다.
    - 분산 처리기는 지역에서 운영하는 데이터베이스를 자체적으로 운영할 수 있는 DBMS가 있다.
- **분산 데이터베이스**
    - 물리적으로 분산된 데이터베이스이다.
    - 보통 해당 지역에서 가장 많이 사용하는 데이터를 저장한다. 그리고 각 지역의 분산 처리기에 설치된 DBMS가 이를 관리한다.
- **통신 네트워크**
    - 지역의 분산 처리기는 네트워크를 통해 자원을 공유하기 때문에 논리적으로는 하나의 시스템과 같은 기능을 제공할 수 있다.
    - 통신 네트워크에 있는 모든 분산 처리기는 특정 통신규약에 따라 데이터를 전송하고 수신한다.
    - 통신 네트워크의 구조는 데이터 통신에 많은 영향을 주기 때문에 효율적 설계가 필요하다.

## 분산 데이터베이스 시스템의 목표

- 분산 데이터베이스 시스템에서는 데이터베이스가 분산되어 있음을 사용자가 인식하지 못하게 하는 것이 중요하다. 이를 **분산 데이터 독립성**이라고 한다.
- 분산 데이터 독립성은 **위치 투명성, 중복 투명성, 단편화 투명성, 병행 투명성, 장애 투명성**이 있다.

### 위치 투명성

- 데이터베이스가 지역적으로 분산되어 있지만, 사용자가 접근하려는 데이터의 실제 저장 위치를 알 필요 없이 데이터베이스의 논리적인 이름만으로 데이터에 접근할 수 있어야 한다.
- DBMS 가 시스템 카탈로그에서 데이터의 모든 위치 정보를 관리하다가 데이터 접근에 대한 요구가 발생하면 이 정보를 제공함으로써 데이터에 대한 접근을 수행한다.

### 중복 투명성

- 데이터베이스를 여러 지역에 분산해 저장할 때 2가지 방법을 생각할 수 있다.
    - 중복되지 않게 데이터를 분할하여 각 지역의 데이터베이스에 저장한다.
    - 지역의 분산 데이터베이스에 데이터를 중복하여 저장하는 것이다.

| 구분 | 내용                                                                                                                                                   |
| --- |------------------------------------------------------------------------------------------------------------------------------------------------------|
| 장점 | 한 지역에서 문제가 발생해도 동일한 데이터가 있는 다른 지역에서 작업을 할 수 있어 신뢰성과 가용성이 높다.<br/>동일한 데이터가 저장된 여러 지역에서 병렬 처리를 할 수 있어 데이터 처리 성능이 좋다.<br/>데이터 처리 요청이 여러 지역에 분산되므로 처리 부담을 줄일 수 있다. |
| 단점 | 동일한 데이터를 중복 저장하므로 저장 공간을 많이 사용한다. <br/>데이터를 변경하려면 중복 저장된 데이터를 모두 함께 변경해야 하므로 비용이 증가하고, 변경 도중에 문제가 생겨 데이터 불일치가 발생할 수 있다.                                   |

- 데이터를 중복 저장하면 데이터 처리의 효율성, 신뢰성, 효율성, 가용성 같은 장점이 크기 때문에 분산 데이터베이스에서는 여러 지역 데이터베이스에 데이터를 중복해서 저장하는 방식을 많이 선택한다.
    - 완전 중복은 동일한 데이터를 둘 이상의 지역 분산 데이터베이스에 저장하는 것이다.
    - 부분 중복은 일부 데이터만 중복하여 저장하는 것이다.

### 단편화 투명성

- 단편화는 하나의 릴레이션을 더 작은 조각으로 나누고 각 조각을 별개의 릴레이션으로 처리하는 것이다.
- 단편화는 전체 릴레이션의 일부이므로 저장 공간을 적게 사용하고, 관리할 데이터 수도 줄어든다.
- 데이터 중복의 장점은 취하면서 단점은 보완할 수 있다.
- 단편화를 수행할 때는 3가지 조건을 만족해야 한다.
    - **완전성** : 전체 릴레이션의 모든 데이터는 어느 한 조각에는 반드시 속해야 한다.
    - **회복성** : 단편화된 조각들로부터 원래의 전체 릴레이션을 회복할 수 있어야 한다.
    - **분리성** : 전체 릴레이션의 모든 조각을 서로 중복되지 않게 분리해야 한다.
- 릴레이션을 단편화하는 방법에는 3가지가 있다.
    - **수평적 단편화** : 릴레이션을 수평적으로 단편화하는 것으로, 릴레이션을 투플(행) 단위로 나눈다.
    - **수직적 단편화** : 릴레이션을 수직적으로 단편화하는 것으로, 릴레이션을 속성(열) 단위로 나눈다.
    - **혼합 단편화** : 수평적, 수직적 단편화를 모두 사용하여 릴레이션을 나눈다.

### 병행 투명성

- 분산 데이터베이스와 관련된 트랜잭션들이 동시에 수행되더라도 결과는 항상 일관성을 유지하는 것이다.

### 장애 투명성

- 특정 지역 시스템에 문제가 생겨도 전체 시스템이 작업할 수 있어야 한다.

## 분산 데이터베이스의 구조

![Image](https://github.com/user-attachments/assets/5c971b98-cd7a-4b41-8135-6ad06487fd52)

- **전역 개념 스키마**
    - 분산 데이터베이스에서 저장할 모든 데이터 구조와 제약조건을 정의한다.
- **단편화 스키마**
    - 분산을 위해 전체 데이터 구조도 여러 조각으로 분할한다.
    - 전역 개념 스키마를 분할하는 방법인 단편화를 정의한다. (전역 개념 스키마와 각 조각 스키마의 대응 관계도 정의한다)
- **할당 스키마**
    - 각 조각 스키마의 인스턴스를 물리적으로 저장해야 되는 지역을 정의한다.

## 분산 데이터베이스의 질의 처리

- 분산 데이터베이스 시스템에서는 질의 처리를 할 때 디스크 접근 횟수에 더해, 네트워크에서 데이터를 전송하는 비용과 하나의 질의문을 분해하여 여러 지역에서 병렬 처리함으로써 얻는 성능상의 이점도 고려한다.

## 분산 데이터베이스 시스템의 장단점

- 장점?
    - 신뢰성과 가용성 증대
    - 지역 자치성과 효율성 증대
    - 확장성 증대
- 단점?
    - 설계 및 구축 비용이 많이 든다.
    - 관리가 복잡하다. 유지보수 비용이 많이 든다.