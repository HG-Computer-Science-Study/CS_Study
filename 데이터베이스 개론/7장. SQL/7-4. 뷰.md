# 1. 뷰의 개념

- 다른 테이블을 기반으로 만들어진 가상 테이블이다. 가상이라고 불리는 이유는 물리적으로 데이터를 저장하고 있지 않기 때문이다.
- 뷰는 기본 테이블(Base Table)을 기반으로 만들어진다.
- 다른 뷰를 기반으로 새로운 뷰를 만들 수 있다.

# 2. 뷰의 생성

```sql
CREATE VIEW 우수고객(고객아이디, 고객이름, 나이, 등급)
AS SELECT 고객아이디, 고객이름, 나이, 등급
	FROM 고객
	WHERE 등급 = 'vip'
WITH CHECK OPTION;
```

- `CREATE VIEW 우수고객` 으로 대체할 수 있는데, 이 경우 기본 테이블의 속성 이름을 그대로 가져간다.
- `WITH CHECK OPTION` 은 뷰에 삽입이나 수정 연산을 할 때 뷰의 정의 조건을 위반하면 수행되지 않게 하는 제약조건이다.

```sql
CREATE VIEW 업체별제품수(제조업체, 제품수)
AS SELECT 제조업체, COUNT(*)
	FROM 제품
	GROUP BY 제조업체
WITH CHECK OPTION;
```

- 다음 상황에서는 `CREATE VIEW 업체별제품수` 으로 대체할 수 없다. 집계 함수를 사용했기애 뷰를 구성하는 속성의 이름을 정확히 제시해야 한다.

# 3. 뷰의 활용

- 뷰는 실제 데이터를 저장하고 있지 않지만, 내부적으로 기본 테이블에 대한 SELECT 문으로 변환되어 실행된다.
- `INSERT`, `UPDATE`,`DELETE` 문 역시 뷰를 대상으로 수행할 수 있다. 물론 뷰에 대한 삽입, 수정, 삭제 연산은 기본 테이블에 수행되기 때문에 결과적으로는 기본 테이블이 변한다.
- 하지만 뷰를 통한 기본 테이블의 변화는 제한적이다.
    - 기본 테이블에서 어떤 투플을 어떻게 변경해야 할지 명확히 제시하지 못하는 뷰는 변경이 허용되지 않는다!
    - 되도록이면 뷰에서는 읽기 연산만 하는게 맞고, 안정적이다.
- 뷰를 사용하면 얻을 수 있는 이점은 다음과 같다
    - 질의문을 좀 더 쉽게 작성할 수 있다.
        - 다양한 집계 함수나 그룹핑, 조인 등을 이용해 미리 뷰를 만들어 놓으면 질의문 작성이 편하다.
    - 데이터의 보안 유지에 도움이 된다.
        - 특정 사용자에게 필요한 정보만을 제공한다.
    - 데이터를 좀 더 편리하게 관리할 수 있다.
        - 제공된 뷰에 포함되지 않은 데이터는 사용자가 신경 쓸 필요가 없다.

# 4. 뷰의 삭제

```sql
DROP VIEW 뷰_이름;
```

- 뷰를 삭제하더라도 기본 테이블은 영향을 받지 않는다.
- 다만 삭제할 뷰를 참조하는 제약조건이 존재한다면 삭제할 수 없다.
    - 삭제하고자 하는 뷰를 참조하는 제약조건을 먼저 삭제해야 한다.