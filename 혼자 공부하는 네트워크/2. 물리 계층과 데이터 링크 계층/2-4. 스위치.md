## 들어가면서

스위치는 데이터 링크 계층의 네트워크 장비이다. (L2 Swtich 라고도 함)

스위치 역시 허브와 동일하게 여러 호스트와 연결할 수 있는데, MAC 주소를 학습하여 **특정 MAC 주소를 가진 호스트에게 프레임을 전달**할 수 있고, **전이중 통신을 지원**한다는 장점이 있다.

## 스위치의 특징

스위치는 각 호스트의 MAC 주소를 알기 위해 **MAC 주소 학습**을 진행하고, 이를 **MAC 주소 테이블**에 저장한다.

**MAC 주소 테이블의 경우 (포트 번호 : MAC 주소) 값으로 저장한다.**

### MAC 주소 학습

1. 플러딩
2. 포워딩과 필터링
3. 에이징

예를 들어서 살펴보자.

1. A가 B에게 프레임을 전송한다. 해당 프레임이 스위치에 도착함. 스위치는 처음에 어떤 정보도 없기 때문에 (A’s port number :  A’s MAC address) 를 저장한다.
2. 스위치는 B의 정보가 없기 때문에, 나머지 호스트 모두에게 해당 프레임을 전송한다. (플러딩)
3. 호스트 C,D 는 해당 프레임을 폐기하고, 호스트 B는 스위치에게 응답 프레임을 전송한다. 이를 바탕으로 스위치는 (B’s port number : B’s MAC address) 를 저장한다.
4. 추후 다시 A가 B에게 프레임을 전송한다고 하면 스위치는 해당 프레임을 B에만 전송하게 필터링하고, B’s port number 에 해당 프레임을 포워딩하게 된다.
5. 만약 MAC 주소 테이블에서 등록된 포트에서 일정 시간동안 프레임을 받지 못했다면 이를 삭제한다. (에이징)

### VLAN

한 대의 스위치로 가상의 LAN을 만드는 방식이다.

스위치에 연결된 호스트 중에서도 서로 메시지를 주고받을 필요가 적거나 없는 경우 같은 LAN에 속할 필요가 없다. 그렇다고 LAN 마다 스위치를 구비하는 것도 낭비임.

그래서 VLAN 을 구성하면 브로드캐스트 메시지를 전송하더라도 같은 VLAN 내에 있는 호스트만 메시지를 전달받을 수 있다.

VLAN을 구성하는 방식에는 2가지가 존재한다.

1. 포트 기반 VLAN
    1. 스위치 포트가 VLAN을 결정하는 방식이다.
2. MAC 기반 VLAN
    1. 송수신하는 프레임 속 MAC 주소가 호스트의 VLAN을 결정하는 방식이다.
    2. 사전에 정해진 규칙에 따라 VLAN이 결정된다.