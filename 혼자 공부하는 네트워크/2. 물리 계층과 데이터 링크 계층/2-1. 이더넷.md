## 들어가면서
물리 계층과 데이터 링크 계층의 경우 이더넷을 공통으로 사용한다.

2개의 컴퓨터가 연결해서 정보를 주고받으려면 케이블이 연결되어 있어야 하고, 통신 매체를 통해 정보를 송,수신하는 방법을 정해야하는데, 이 방법 등이 정의된 네트워크 기술을 **이더넷**이라고 한다.

## 이더넷 표준

오늘날의 유선 LAN 환경은 대부분 이더넷을 기반으로 구성된다. 그래서 현재 국제적으로 표준화가 이루어졌는데, 이를 **IEEE 802.3** 이라고 한다. 참고로 IEEE의 전문가 단체, 작업 그룹을 지칭하기도 한다.

## 이더넷 프레임

데이터 링크 계층에서 주고받는 프레임인 이더넷 프레임 형식은 정해져 있다.

이더넷 프레임은 상위 계층으로부터 받아들인 정보에 헤더와 트레일러를 추가하는 캡슐화 작업을 통해 만들어지고, 수신자를 이를 역캡슐화한다. 이더넷 프레임은 다음과 같이 구성된다.

![프레임](https://github.com/user-attachments/assets/474a7634-e417-4509-9220-6b4c14e01f3e)

### 프리앰블

- 이더넷 프레임의 시작을 알리는 8바이트이다.
- 수신자는 프리앰블을 통해 이더넷 프레임이 오고 있음을 알 수 있다.

### 수진자의 MAC 주소와 송신자의 MAC 주소

- MAC 주소는 네트워크 인터페이스마다 부여되는 6바이트 길이의 주소로, LAN 내의 수신지와 송신지를 구별할 수 있다.
- NIC(Network Interface Controller) 마다 1개씩 할당되며, 한 컴퓨터에 여러 개 할당할 수 있다.
- 동일한 LAN 안에서는 일반적으로 고유하며, 변경되지 않는다. (중복되고, 변경될 수는 있음)

### 타입/길이

- 필드에 명시된 크기가 1500(05DC) 이하인 경우 프레임의 길이, 1536(0600) 이상이면 타입을 나타낸다.
- 타입의 경우 이더타입이라고도 하며, 어떤 정보를 캡슐화했는지 나타내는 정보이다.
- 예를 들어 IPv4 을 캡슐화한다면 0800, IPv6 을 캡슐화했다면 86DD 로 작성한다.

### 데이터

- 상위 계층에서 전달받거나 상위 계층으로 전달해야 하는 데이터이다.
- 네트워크 계층의 데이터와 헤더를 합친 값을 의미한다.
- 반드시 일정한 크기(46바이트) 이상이여야 하며, 그 이하라면 0으로 패딩을 진행한다.

### FCS

- 수신한 이더넷 프레임이 오류가 있는지 확인하기 위한 필드이다.
- CRC(Cyclic Redundancy Check) 값이 들어가는데, 송신자가 계산한 값과 수신자의 값이 일치하면 통과, 아니면 유효하지 않다고 인식하고 해당 프레임을 폐기한다.

## 토큰 링

이더넷외에 다른 LAN 기술이 토큰 링이다. 호스트들이 링 형태로 연결되며, 각 호스트는 토큰이 있어야 데이터를 전송할 수 있다. 각 노드는 데이터를 전송하면 토큰을 다른 노드에게 줘야 한다.

### 장점?

- 네트워크 충돌이 없고, 네트워크 성능 예측이 쉽다.

### 단점?

- 당장 전송 해야하는 노드도 토큰을 받을 때까지 대기해야 한다.
- 이더넷보다 느리다.

## 첨부) MAC 주소는 언제 사용되지?

서버, 클라이언트 구조에서 둘이 각각 다른 LAN에 위치한다고 가정하자.

1. 클라이언트는 서버의 IP 주소를 보고 서버가 다른 네트워크에 있다는 것을 알 수 있다.
    1. 서브넷 마스크를 통해서 알 수 있다.
    2. 클라이언트 IP: 192.168.1.5, 서브넷 마스크: 255.255.255.0 라고 할 때
    3. 서버 IP: 192.168.2.10
    4. 서로 다른 네트워크에 있음이 확인됨.
2. 클라이언트는 서버로 보낼 데이터를 캡슐화하고 기본 게이트웨이의 MAC 주소로 캡슐화하여 전송한다.
3. 해당 패킷은 서버의 LAN에 위치하는 게이트웨이까지 전송된다.
4. 패킷이 서버가 존재하는 네트워크에 도착하면 MAC 주소를 기반으로 서버까지 전달된다.

보통 데이터 링크 계층에서 자동적으로 처리되기 때문에 신경쓰지 않아도 된다.

## 질문 1 : MAC 주소가 중복되는 경우?
MAC 주소는 네트워크 내에서 고유한 것이 원칙이다. 하지만 다음과 같이 예외가 발생할 수 있다.
- 일부 장치의 MAC 주소를 수동으로 변경하거나
- 악의적인 공격자가 중복된 MAC 주소를 사용해 네트워크 트래픽을 가로채거나, 중단하는 경우 (ARP 스푸핑)
- 네트워크 설정이 잘못 된 경우


하지만 언제나 MAC 주소가 중복된다고 문제가 되는건 아니다. 다음 2가지 상황을 보자.
### 서로 다른 내트워크에서 MAC 주소가 중복되는 상황
1. 이 상황에서는 문제될 것이 없다. MAC 주소는 동일한 로컬 네트워크 LAN 내에서만 유효하기 때문이다. 
### 동일한 네트워크 내에서 MAC 주소가 중복되는 상황
1. 문제가 되는 것이 이 상황인데, 스위치는 MAC 주소를 통해 장치를 식별하기 때문이다.
2. 스위치는 MAC 주소 테이블을 사용해 장치가 연결된 포트르 관리하는데, 중복 MAC 주소가 있다면 이 테이블 정보가 충돌하거나 갱신될 수 있다.
3. 결과적으로는 네트워크 혼란, 통신 실패, 패킷 손실 등이 발생한다.

### 해결책?
1. MAC 주소를 수동으로 변경하지 않기
2. 제조사의 문제인 경우 장비를 교체하기
3. 지속적인 네트워크 모니터링을 통해 MAC 주소 관리하기

## 질문 2. 무선 LAN에서는 어떤 프레임이 만들어지고, 어떻게 동작하나?
무선 LAN 에서는 Wi-Fi(IEEE 802.11) 프로토콜이 물리 계층 데이터를 무선 신호로 변환하여 송수신한다. (유선 LAN 에서는 IEEE 802.3 사용)
- 데이터를 전자기파(2.4GHz, 5GHz, 또는 6GHz 대역)로 변환하여 전송한다.

유선 LAN 에서는 대부분 동일한 유형의 프레임을 사용하지만, 무선 LAN 에서는 무선 환경에 맞게 설계된 다양한 형태의 프레임이 사용된다. <br>
데이터 링크 계층에서 802.11 프레임을 생성하고, 3가지 주요 유형으로 나뉜다. (관리 프레임, 제어 프레임, 데이터 프레임)
802.11 MAC 프레임 내 802.11 프레임 제어 필드 중 2,3번째 필드로써, 프레임 유형을 결정한다.

![image](https://github.com/user-attachments/assets/3c75d160-b17c-4e7a-bc8c-b640a0e8c3db)

관련 자세한 내용은 7장 411쪽에 등장!

## 질문 3 : 베이스 밴드와 브로드 밴드?
### 베이스 밴드
디지털 형태의 0,1의 직류 신호를 변조 없이 그대로 수신 측에 전달하는 방식이다. 데이터 신호 그 자체를 의미하며, 전송 매체에 채널을 하나만 생성하여 전송한다.
장거리 전송에는 적합하지 않고, 근거리 통신에서만 사용한다.
#### 장점
- 간단한 구조를 가지며 낮은 비용을 효율적으로 사용할 수 있다.
- 텍스트 위주의 데이터를 전송한다.
#### 단점
- 전송 거리가 짧고, 동시 전송이 불가능하다.
- 주파수 대역폭이 낮아 속도나 용량이 제한될 수 있다.

### 브로드 밴드
디지털 신호 0,1을 아날로그 신호(고주파 대역)로 변환하여 수신측에 전달하는 방식이다. 아날로그 통신망을 이용하여 수신 측은 아날로그 신호를 다시 디지털 신호로 변환해야 한다. 광섬유, 동축 케이블을 사용한다.
#### 장점
- 단일 채널이 아닌 다수의 채널을 사용할 수 있으며, 장거리 전송에 적합하다.
- 텍스트, 음성, 영상 등의 다양한 정보를 보낼 수 있다.
#### 단점
- 구조가 복잡하며 비용이 비싸다.

## 질문 4 : 리피터 사용 이유?
리피터는 네트워크에서 신호를 증폭하거나 재생하여 전송 거리의 한계를 극복하는 장치이다. 디지털 신호의 경우 원래 비트 신호(0,1) 을 복구하고, 아날로그 신호의 경우 약화된 신호의 전압 또는 전류를 증폭시킨다.

### 리피터가 필요한 이유?
위에서 언급한 브로드밴드에서 리피터가 필요하다. 이유는 다음과 같다.
- 브로드밴드 방식은 주파수 대역폭을 넓게 사용해 데이터를 전송하므로, 신호가 전송 매체를 따라 이동할수록 감쇠가 발생한다. 장거리 통신에서는 감쇠로 인해 신호 품질이 떨어지므로 리피터를 사용해서 신호를 증폭하거나 재생해야 한다.
- 브로드밴드 방식은 하나의 전송 매체에서 여러 채널을 사용하므로, 각각의 신호가 약화되지 않도록 리피터가 필요하다.
- 고주파 대역 특성상 저주파 대역보다 감쇠와 간섭에 민감해서 리피터가 주기적으로 노이즈를 제거해야 한다.



