## 들어가면서
물리 계층과 데이터 링크 계층의 경우 이더넷을 공통으로 사용한다.

2개의 컴퓨터가 연결해서 정보를 주고받으려면 케이블이 연결되어 있어야 하고, 통신 매체를 통해 정보를 송,수신하는 방법을 정해야하는데, 이 방법 등이 정의된 네트워크 기술을 **이더넷**이라고 한다.

## 이더넷 표준

오늘날의 유선 LAN 환경은 대부분 이더넷을 기반으로 구성된다. 그래서 현재 국제적으로 표준화가 이루어졌는데, 이를 **IEEE 802.3** 이라고 한다. 참고로 IEEE의 전문가 단체, 작업 그룹을 지칭하기도 한다.

## 이더넷 프레임

데이터 링크 계층에서 주고받는 프레임인 이더넷 프레임 형식은 정해져 있다.

이더넷 프레임은 상위 계층으로부터 받아들인 정보에 헤더와 트레일러를 추가하는 캡슐화 작업을 통해 만들어지고, 수신자를 이를 역캡슐화한다. 이더넷 프레임은 다음과 같이 구성된다.

![프레임](https://github.com/user-attachments/assets/474a7634-e417-4509-9220-6b4c14e01f3e)

### 프리앰블

- 이더넷 프레임의 시작을 알리는 8바이트이다.
- 수신자는 프리앰블을 통해 이더넷 프레임이 오고 있음을 알 수 있다.

### 수진자의 MAC 주소와 송신자의 MAC 주소

- MAC 주소는 네트워크 인터페이스마다 부여되는 6바이트 길이의 주소로, LAN 내의 수신지와 송신지를 구별할 수 있다.
- NIC(Network Interface Controller) 마다 1개씩 할당되며, 한 컴퓨터에 여러 개 할당할 수 있다.
- 동일한 LAN 안에서는 일반적으로 고유하며, 변경되지 않는다. (중복되고, 변경될 수는 있음)

### 타입/길이

- 필드에 명시된 크기가 1500(05DC) 이하인 경우 프레임의 길이, 1536(0600) 이상이면 타입을 나타낸다.
- 타입의 경우 이더타입이라고도 하며, 어떤 정보를 캡슐화했는지 나타내는 정보이다.
- 예를 들어 IPv4 을 캡슐화한다면 0800, IPv6 을 캡슐화했다면 86DD 로 작성한다.

### 데이터

- 상위 계층에서 전달받거나 상위 계층으로 전달해야 하는 데이터이다.
- 네트워크 계층의 데이터와 헤더를 합친 값을 의미한다.
- 반드시 일정한 크기(46바이트) 이상이여야 하며, 그 이하라면 0으로 패딩을 진행한다.

### FCS

- 수신한 이더넷 프레임이 오류가 있는지 확인하기 위한 필드이다.
- CRC(Cyclic Redundancy Check) 값이 들어가는데, 송신자가 계산한 값과 수신자의 값이 일치하면 통과, 아니면 유효하지 않다고 인식하고 해당 프레임을 폐기한다.

## 토큰 링

이더넷외에 다른 LAN 기술이 토큰 링이다. 호스트들이 링 형태로 연결되며, 각 호스트는 토큰이 있어야 데이터를 전송할 수 있다. 각 노드는 데이터를 전송하면 토큰을 다른 노드에게 줘야 한다.

### 장점?

- 네트워크 충돌이 없고, 네트워크 성능 예측이 쉽다.

### 단점?

- 당장 전송 해야하는 노드도 토큰을 받을 때까지 대기해야 한다.
- 이더넷보다 느리다.

## 첨부) MAC 주소는 언제 사용되지?

서버, 클라이언트 구조에서 둘이 각각 다른 LAN에 위치한다고 가정하자.

1. 클라이언트는 서버의 IP 주소를 보고 서버가 다른 네트워크에 있다는 것을 알 수 있다.
    1. 서브넷 마스크를 통해서 알 수 있다.
    2. 클라이언트 IP: 192.168.1.5, 서브넷 마스크: 255.255.255.0 라고 할 때
    3. 서버 IP: 192.168.2.10
    4. 서로 다른 네트워크에 있음이 확인됨.
2. 클라이언트는 서버로 보낼 데이터를 캡슐화하고 기본 게이트웨이의 MAC 주소로 캡슐화하여 전송한다.
3. 해당 패킷은 서버의 LAN에 위치하는 게이트웨이까지 전송된다.
4. 패킷이 서버가 존재하는 네트워크에 도착하면 MAC 주소를 기반으로 서버까지 전달된다.

보통 데이터 링크 계층에서 자동적으로 처리되기 때문에 신경쓰지 않아도 된다.


